<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–§–æ—Ä–º–∞ —Ä–∞—Å—Å—Ä–æ—á–∫–∏</title>
  <style>
    body { font-family: sans-serif; padding: 20px; max-width: 700px; margin: auto; }
    input, select, button { width: 100%; margin-bottom: 10px; padding: 8px; font-size: 1em; }
    .product { border: 1px solid #ccc; padding: 10px; margin-bottom: 10px; }
  </style>
</head>
<body>

  <h2>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–≥–æ–≤—Ä–∞ —Ä–∞—Å—Å—Ä–æ—á–∫–∏</h2>

  <form 
    id="contractForm" 
    action="https://script.google.com/macros/s/AKfycbyn_0HeMcm_ynVFYzkJIsPmciWg9LKFr1A7DBFPS5F6puGAnnHuNjP5ipeNRhKOSoCVqA/exec"
    method="post" 
    target="invisibleFrame"
  >
    <input name="contractNumber" placeholder="–ù–æ–º–µ—Ä –¥–æ–≥–æ–≤–æ—Ä–∞" required />
    <input name="contractCode" placeholder="–ë—É–∫–≤—ã –¥–æ–≥–æ–≤–æ—Ä–∞" required />
    <input name="fullName" placeholder="–§.–ò.–û –ü–æ–∫—É–ø–∞—Ç–µ–ª—è" required />
    <input name="passport" placeholder="–ü–∞—Å–ø–æ—Ä—Ç" required />
    <input name="pinfl" placeholder="–ü–ò–ù–§–õ" required />
    <input name="phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" required />

    <label>–î–∞—Ç–∞ –ø–µ—Ä–≤–æ–≥–æ –ø–ª–∞—Ç–µ–∂–∞:</label>
    <input type="date" name="firstPaymentDate" required />

    <label>–ü–µ—Ä–∏–æ–¥ —Ä–∞—Å—Å—Ä–æ—á–∫–∏ (–≤ –º–µ—Å—è—Ü–∞—Ö):</label>
    <select name="paymentPeriod" required>
      <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–∏–æ–¥</option>
      <option value="3">3 –º–µ—Å—è—Ü–∞</option>
      <option value="6">6 –º–µ—Å—è—Ü–µ–≤</option>
      <option value="9">9 –º–µ—Å—è—Ü–µ–≤</option>
      <option value="12">12 –º–µ—Å—è—Ü–µ–≤</option>
    </select>

    <h3>–¢–æ–≤–∞—Ä—ã</h3>
    <div id="products"></div>
    <button type="button" onclick="addProduct()">+ –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</button>

    <br />
    <button type="submit">üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
  </form>

  <!-- –°–∫—Ä—ã—Ç—ã–π iframe –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ -->
  <iframe name="invisibleFrame" style="display:none;"></iframe>

  <script>
    const form = document.getElementById("contractForm");
    const productsDiv = document.getElementById("products");

    function addProduct() {
      const index = productsDiv.children.length;
      const wrapper = document.createElement("div");
      wrapper.className = "product";
      wrapper.innerHTML = `
        <input name="productName_${index}" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞" required />
        <input name="productQty_${index}" type="number" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ" required />
        <input name="productPrice_${index}" type="number" step="0.01" placeholder="–¶–µ–Ω–∞ (—Å—É–º)" required />
      `;
      productsDiv.appendChild(wrapper);
    }

    form.addEventListener("submit", () => {
      alert("‚úÖ –§–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞! –î–æ–∫—É–º–µ–Ω—Ç –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ Telegram.");
      setTimeout(() => {
        form.reset();
        productsDiv.innerHTML = "";
        addProduct();
      }, 1000);
    });

    // –û–¥–∏–Ω —Ç–æ–≤–∞—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    addProduct();
  </script>
</body>
</html>
